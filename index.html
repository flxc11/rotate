<!doctype html><html><head><meta charset="utf-8"><title>转盘</title><style>	*{padding:0;margin:0;}	body{		text-align:center;	}	.ly-plate{		position:relative;		width:1080px;		height:1920px;		margin: 0 auto;	}	.rotate-bg{		width:1080px;		height:1920px;		background:url(ly-plate.jpg);		position:absolute;		top:0;		left:0;	}	.ly-plate div.lottery-star{		width:330px;		height:330px;		position:absolute;		top:660px;		left:392px;		/*text-indent:-999em;		overflow:hidden;		background:url(rotate-static.png);		-webkit-transform:rotate(0deg);*/		outline:none;	}	.ly-plate div.lottery-star #lotteryBtn{		cursor: pointer;		position: absolute;		top:0;		left:0;	}</style></head><body>	<div class="ly-plate">		<div class="rotate-bg"></div>		<div class="lottery-star"><img src="rotate-static.png" id="lotteryBtn" width="330"></div>	</div></body><script src="jquery-1.7.2.min.js"></script><script src="jQueryRotate.2.2.js"></script><script src="jquery.easing.min.js"></script><script>// if(window.localStorage){//  alert('This browser supports localStorage');// }else{//  alert('This browser does NOT support localStorage');// }$(function(){	$("#clear").bind({click: function(){		storage.removeItem("rslt");		alert("中奖纪录为：" + storage.getItem("rslt"));	}})	$("#sx").bind({click: function(){		window.location.reload();	}})	// var timeOut = function(){  //超时函数	// 	$("#lotteryBtn").rotate({	// 		angle:0,	// 		duration: 10000,	// 		animateTo: 2160, //这里是设置请求超时后返回的角度，所以应该还是回到最原始的位置，2160是因为我要让它转6圈，就是360*6得来的	// 		callback:function(){	// 			alert('网络超时')	// 		}	// 	});	// };	var animate = true;	var roundRotate = function() {		var data = "";		data = Math.ceil(Math.random()*250);		// if (storage.getItem("rslt")) {		// 	var array = storage.getItem("rslt").split(",");		// 	if (array.length < 100) {		// 		data = Math.ceil(Math.random()*298);		// 	} else if (100 < array.length < 200) {		// 		data = Math.ceil(Math.random()*299);		// 	} else {		// 		data = Math.ceil(Math.random()*300);		// 	}		// } else {		// 	data = Math.ceil(Math.random()*298);		// }		//var array = storage.getItem("rslt").split(",");			if (!storage.getItem("rslt")) {				storage.setItem("rslt","," + data + ",");				//storage.setItem("rslt",storage.getItem("rslt") + data + ",");					if(data >=1 && data<= 40){						rotateFunc(1,25,'温州新禾工程检测有限公司');					} else if(data >=41 && data<= 60){						rotateFunc(2,70,'温州励天励行电子商务有限公司');					} else if(data >=61 && data<= 80){						rotateFunc(3,115,'温州极枫生物科技有限公司');					}  else if(data >=81 && data<= 90){						rotateFunc(4,160,'下关沱茶浙江终端服务商');					}  else if(data >=91 && data<= 140){						rotateFunc(5,205,'中国银行松台支行');					} else if(data >=141 && data<= 190){						rotateFunc(6,250,'温州派森打击乐');					} else if(data >=191 && data<= 200){						rotateFunc(7,295,'温州雁荡电影院线有限公司');					} else if(data >=201 && data<= 250){						rotateFunc(8,340,'鼓励奖');					}			} else {				var array = storage.getItem("rslt").split(",");				if (array.length > 250) {					alert("本次活动已结束");					return false;				} else {					if (storage.getItem("rslt").indexOf("," + data + ",") >=0) {						if (animate) {							roundRotate();						};					} else {						if (animate) {							storage.setItem("rslt",storage.getItem("rslt") + data + ",");							console.log(array.length,storage.getItem("rslt"));							if(data >=1 && data<= 40){								rotateFunc(1,25,'温州新禾工程检测有限公司');							} else if(data >=41 && data<= 60){								rotateFunc(2,70,'温州励天励行电子商务有限公司');							} else if(data >=61 && data<= 80){								rotateFunc(3,115,'温州极枫生物科技有限公司');							}  else if(data >=81 && data<= 90){								rotateFunc(4,160,'下关沱茶浙江终端服务商');							}  else if(data >=91 && data<= 140){								rotateFunc(5,205,'中国银行松台支行');							} else if(data >=141 && data<= 190){								rotateFunc(6,250,'温州派森打击乐');							} else if(data >=191 && data<= 200){								rotateFunc(7,295,'温州雁荡电影院线有限公司');							} else if(data >=201 && data<= 250){								rotateFunc(8,340,'鼓励奖');							}						};					}					//console.log(array.length, storage.getItem("rslt"));				}			}	}	var rotateFunc = function(awards,angle,text){  //awards:奖项，angle:奖项对应的角度		animate = false;		$('#lotteryBtn').stopRotate();		$("#lotteryBtn").rotate({			angle:0,			duration: 0,			animateTo: angle+0, //angle是图片上各奖项对应的角度，1440是我要让指针旋转4圈。所以最后的结束的角度就是这样子^^			callback:function(){				alert(text);				animate = true;			}		});	};	var storage = window.localStorage;	$("#lotteryBtn").rotate({	   bind:		 {			click: function(){				// var data = [1,2,3,0]; //返回的数组					// 	data = data[Math.floor(Math.random()*data.length)];				roundRotate();				animate = false;			}		 }	});})</script><div id="clear" style="position: absolute;left:0;top:0;z-index:999;width:100px;height:100px;cursor: pointer;"></div><div id="sx" style="position: absolute;right:0;top:0;z-index:999;width:100px;height:100px;cursor: pointer;"></div></html>